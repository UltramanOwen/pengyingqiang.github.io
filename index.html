<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?1f37d6e1c93f4addbd32c6f1b3266ade";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  
  <title>Box</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Box">
<meta property="og:url" content="http://pengyq.org/index.html">
<meta property="og:site_name" content="Box">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Box">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Box" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/box.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Box</a></h1>
		</hgroup>

		
		<p class="header-subtitle">业精于勤荒于嬉，行成于思毁于随</p>
		

		
			<div class="switch-btn">
			
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0"> 
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
				</div>
			
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/pengyq" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/kerwinpeng" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/pengyq" title="zhihu">zhihu</a>
					        
								<a class="mail" target="_blank" href="mailto:peng.yq@qq.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/undefined/" style="font-size: 10px;"></a> <a href="/tags/javascript/" style="font-size: 10px;"> javascript</a> <a href="/tags/Hive/" style="font-size: 15px;">Hive</a> <a href="/tags/R/" style="font-size: 10px;">R</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/matplotlib/" style="font-size: 10px;">matplotlib</a> <a href="/tags/pandas/" style="font-size: 10px;">pandas</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a> <a href="/tags/zeppelin/" style="font-size: 10px;">zeppelin</a> <a href="/tags/优化/" style="font-size: 10px;">优化</a> <a href="/tags/公式/" style="font-size: 10px;">公式</a> <a href="/tags/小文件/" style="font-size: 10px;">小文件</a> <a href="/tags/数据挖掘/" style="font-size: 15px;">数据挖掘</a> <a href="/tags/理论/" style="font-size: 10px;">理论</a> <a href="/tags/算法包/" style="font-size: 10px;">算法包</a> <a href="/tags/随笔/" style="font-size: 20px;">随笔</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">就职于腾讯。擅长数据分析，大数据平台架构，数据库，Java Web，Python，数据挖掘爱好者 …</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Box</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/box.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Box</h1>
			</hgroup>
			
			<p class="header-subtitle">业精于勤荒于嬉，行成于思毁于随</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/pengyq" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/kerwinpeng" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/pengyq" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="mailto:peng.yq@qq.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-spark和hive数据打通" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/28/spark和hive数据打通/" class="article-date">
  	<time datetime="2016-06-28T02:59:00.000Z" itemprop="datePublished">2016-06-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/28/spark和hive数据打通/">spark和hive数据打通</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="u4E3A_u4EC0_u4E48_u8981_u505A_u8FD9_u4E2A_u4E8B_u60C5_uFF1F"><a href="#u4E3A_u4EC0_u4E48_u8981_u505A_u8FD9_u4E2A_u4E8B_u60C5_uFF1F" class="headerlink" title="为什么要做这个事情？"></a>为什么要做这个事情？</h2><p>Hive管理的数据本身就带有表结构，比如数据类型，字段名<br>在spark机器学习数据处理过程中，直接读取文件的方式需要从文件转换到dataframe，这个时候最麻烦的就是Schema<br>如果打通hive和spark，我们就可以直接在hive中定义好表结构,在spark中直接使用。非常省事，也不用关心hive表数据是哪种文件格式了，RCFILE，SequenceFile, TextFile等全部兼容</p>
<h2 id="u73AF_u5883_u51C6_u5907"><a href="#u73AF_u5883_u51C6_u5907" class="headerlink" title="环境准备"></a>环境准备</h2><p>安装hive和安装spark具体安装过程这里就不详细介绍了。<br>主要讲下，spark如何整合hive</p>
<h3 id="1-_Hive_u914D_u7F6E_u6587_u4EF6_u62F7_u8D1D"><a href="#1-_Hive_u914D_u7F6E_u6587_u4EF6_u62F7_u8D1D" class="headerlink" title="1. Hive配置文件拷贝"></a>1. Hive配置文件拷贝</h3><p>Copy hive安装目录下的hive-site.xml到$SPARK_HOME/conf目录</p>
<h3 id="2-__u6DFB_u52A0JDBC_u9A71_u52A8"><a href="#2-__u6DFB_u52A0JDBC_u9A71_u52A8" class="headerlink" title="2. 添加JDBC驱动"></a>2. 添加JDBC驱动</h3><p>添加如下两行：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export <span class="constant">HIVE_HOME</span>=<span class="regexp">/data/hive</span></span><br><span class="line">export <span class="constant">SPARK_CLASSPATH</span>=<span class="variable">$HIVE_HOME</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">mysql</span>-<span class="title">connector</span>-<span class="title">java</span>-5.1.26-<span class="title">bin</span>.<span class="title">jar</span>:$<span class="title">SPARK_CLASSPATH</span></span></span><br></pre></td></tr></table></figure></p>
<p>作用是，让spark可以知道连接那个hive源数据库，并且吧元数据库连接的驱动程序加载到classpath</p>
<h2 id="Spark-sql"><a href="#Spark-sql" class="headerlink" title="Spark-sql"></a>Spark-sql</h2><p>执行 spar-sql命令，进入命令行模式，就可以和hive命令行一样执行HQL了</p>
<h2 id="spark_u7F16_u7A0B"><a href="#spark_u7F16_u7A0B" class="headerlink" title="spark编程"></a>spark编程</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">val conf=new <span class="function"><span class="title">SparkConf</span><span class="params">()</span></span></span><br><span class="line">conf.<span class="function"><span class="title">setAppName</span><span class="params">(<span class="string">"test"</span>)</span></span></span><br><span class="line">val sc = new <span class="function"><span class="title">SparkContext</span><span class="params">(conf)</span></span></span><br><span class="line">val sqlContext = new <span class="function"><span class="title">SQLContext</span><span class="params">(sc)</span></span></span><br><span class="line">val hiveContext=new <span class="function"><span class="title">HiveContext</span><span class="params">(sc)</span></span></span><br><span class="line">val data=hiveContext.<span class="function"><span class="title">sql</span><span class="params">(args(<span class="number">0</span>)</span></span>)</span><br><span class="line">  data.<span class="function"><span class="title">printSchema</span><span class="params">()</span></span></span><br><span class="line">  data.<span class="function"><span class="title">show</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<h2 id="u8FD0_u884C_u7A0B_u5E8F"><a href="#u8FD0_u884C_u7A0B_u5E8F" class="headerlink" title="运行程序"></a>运行程序</h2><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spark-submit \</span><br><span class="line">  -<span class="ruby">-<span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">tencent</span>.<span class="title">your</span>.<span class="title">package</span>.<span class="title">Test</span> \</span></span><br><span class="line"></span>  -<span class="ruby">-master  <span class="symbol">spark:</span>/<span class="regexp">/master:7077 \</span><br><span class="line"></span></span>  -<span class="ruby"><span class="regexp">-executor-memory 1G \</span><br><span class="line"></span></span>  -<span class="ruby"><span class="regexp">-total-executor-cores 10 \</span><br><span class="line"></span></span> your_spark.jar "select * from table where ds=20160616 limit 10"</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hive/">Hive</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spark/">spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据挖掘/">数据挖掘</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-一些感悟－2016-6-27" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/27/一些感悟－2016-6-27/" class="article-date">
  	<time datetime="2016-06-27T14:23:00.000Z" itemprop="datePublished">2016-06-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/27/一些感悟－2016-6-27/">一些感悟－2016.6.27</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>  时间过的好快，上次更新博客的时候开始2016的开始，转眼间一晃又到了年中。<br>  和以往不同的是，这半年有幸参加了一次张韶涵的演唱会，并且看完了陈坤的《突然就走到了西藏》，都说程序员的世界算是比较枯燥的，除了技术，我也在改变自己，希望让生活多一些乐趣，培养一些新的习惯。<br> 第一次听张韶涵的名字应该是高一的时候，宿舍一个朋友非常喜欢张韶涵，那时候却是对歌星的也没有什么特别崇拜的感觉。都说张韶涵是治愈系的歌星。当身处她演唱会现场的时候，的确这位歌手的歌声和歌词，总是给人一种满满的能量。从《隐形的翅膀》到《无形的翅膀》，每个人的生活都有需要放松或者寻找依靠的时候。尤其在现场的时候能够看到她很努力努力的演出。对于一个抱着凑热闹的人来说，的确歌手的歌声和演唱认真的程度，都是让人出乎意料，让人觉得确实是充电的感觉。好奇的百度了一些关于张韶涵的事情，发现其实每个人在自己的生活中都是在尽力扮演一个强者。一个女生都能如此坚强，如此勇敢，我们是不是应该更积极更勇敢的把生活过的更精彩呢？</p>
<p> 关于陈坤的《突然就走到了西藏》，让我了解到了一个从平凡到突然出名之间如何调整面对生活的过程，其实无伦在哪个阶段，哪个环境，我们都应该多一些思考，贫穷之时，不悲，不弃。做好自己，富有之时，不骄不躁。的确，工作有时候很忙，压力也很大，很想出去来一场很远的旅行。今年给自己设定的目标就是，出了技术和工作外，有时间就多出去走走，多看看外面的风景。</p>
<p>   写这些的原因其实是，借两件事情，了解了另一些和自己生活本不想关人的事情，多了一些积极向上的感悟。生活中美好的事情很多，总是有很多正能量在成长的路上不断给自己加油。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/随笔/">随笔</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Hive小文件合并原理和技巧" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/08/Hive小文件合并原理和技巧/" class="article-date">
  	<time datetime="2016-04-08T09:57:00.000Z" itemprop="datePublished">2016-04-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/08/Hive小文件合并原理和技巧/">Hive小文件合并原理和技巧</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-__u4E3A_u4EC0_u4E48_u505A_u5C0F_u6587_u4EF6_u5408_u5E76"><a href="#1-__u4E3A_u4EC0_u4E48_u505A_u5C0F_u6587_u4EF6_u5408_u5E76" class="headerlink" title="1. 为什么做小文件合并"></a>1. 为什么做小文件合并</h2><p>hadoop的namenode负责hdfs文件系统所以目录和文件结构管理，小文件过多，会增加namenode的存储和计算压力，namenode不像datanode那样多个节点共同工作，小文件过多会占用namenode内存资源，当client读取或者写入大量小文件则有可能给namenode造成很大压力，最终影响整个集群稳定性</p>
<h4 id="1-1_Map_Reduce_u4E2A_u6570"><a href="#1-1_Map_Reduce_u4E2A_u6570" class="headerlink" title="1.1 Map Reduce个数"></a>1.1 Map Reduce个数</h4><p>作业会通过input的目录产生一个或者多个map任务。 主要的决定因素有： input的文件总个数，input的文件大小，集群设置的文件块大小(目前为128M, 可在hive中通过set dfs.block.size;命令查看到，该参数不能自定义修改)；</p>
<p>根据实际数据情况，集群设置 dfs.block.size=268435456    –(256M)</p>
<h4 id="1-2__u4E3E_u4F8B_uFF1A"><a href="#1-2__u4E3E_u4F8B_uFF1A" class="headerlink" title="1.2 举例："></a>1.2 举例：</h4><blockquote>
<p>（1）   假设input目录下有1个文件a,大小为780M,那么hadoop会将该文件a分隔成7个块（3个256m的块和1个12m的块），从而产生4个map数</p>
<p>（2）  假设input目录下有3个文件a,b,c,大小分别为10m，20m，300m，那么hadoop会分隔成4个块（10m,20m,256m,44m）,从而产生4个map数即，如果文件大于块大小(256m),那么会拆分，如果小于块大小，则把该文件当成一个块。</p>
</blockquote>
<h4 id="1-3__u662F_u4E0D_u662Fmap_u6570_u8D8A_u591A_u8D8A_u597D_uFF1F"><a href="#1-3__u662F_u4E0D_u662Fmap_u6570_u8D8A_u591A_u8D8A_u597D_uFF1F" class="headerlink" title="1.3 是不是map数越多越好？"></a>1.3 是不是map数越多越好？</h4><p>  答案是否定的。如果一个任务有很多小文件（远远小于块大小256m）,则每个小文件也会被当做一个块，用一个map任务来完成，而一个map任务启动和初始化的时间远远大于逻辑处理的时间，就会造成很大的资源浪费。而且，同时可执行的map数是受限的。</p>
<h4 id="1-4__u4FDD_u8BC1_u6BCF_u4E2Amap_u5904_u7406_u63A5_u8FD1256m_u7684_u6587_u4EF6_u5757_uFF0C_u5C31_u9AD8_u6795_u65E0_u5FE7_u4E86_uFF1F"><a href="#1-4__u4FDD_u8BC1_u6BCF_u4E2Amap_u5904_u7406_u63A5_u8FD1256m_u7684_u6587_u4EF6_u5757_uFF0C_u5C31_u9AD8_u6795_u65E0_u5FE7_u4E86_uFF1F" class="headerlink" title="1.4 保证每个map处理接近256m的文件块，就高枕无忧了？"></a>1.4 保证每个map处理接近256m的文件块，就高枕无忧了？</h4><p>答案也是不一定。比如有一个255m的文件，正常会用一个map去完成，但这个文件只有一个或者两个小字段，却有几千万的记录，如果map处理的逻辑比较复杂，用一个map任务去做，肯定也比较耗时。针对上面的问题3和4，我们需要采取两种方式来解决：即减少map数和增加map数；</p>
<h4 id="1-5__u5982_u4F55_u51CF_u5C11map_u6570"><a href="#1-5__u5982_u4F55_u51CF_u5C11map_u6570" class="headerlink" title="1.5 如何减少map数"></a>1.5 如何减少map数</h4><p>减少map数可以通过合并小文件、调整文件块大小来完成<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">set</span> mapred.<span class="keyword">max</span>.<span class="keyword">split</span>.<span class="keyword">size</span>= <span class="number">268435456</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> mapred.<span class="keyword">min</span>.<span class="keyword">split</span>.<span class="keyword">size</span>.per.node=<span class="number">100000000</span>;</span> <span class="comment">--datanode上文件大于这个值才会合并</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> mapred.<span class="keyword">min</span>.<span class="keyword">split</span>.<span class="keyword">size</span>.per.rack=<span class="number">100000000</span>;</span><span class="comment">--多个机架上的数据是否需要合并</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.<span class="keyword">input</span>.<span class="keyword">format</span>=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="1-6__u5982_u4F55_u589E_u52A0map_u6570"><a href="#1-6__u5982_u4F55_u589E_u52A0map_u6570" class="headerlink" title="1.6 如何增加map数"></a>1.6 如何增加map数</h4><p>例如:<br>一个map文件只有250M 但是其中的记录数有上千万，而且SQL对每个记录操作非常复杂，那么需要增加map数来加快处理速度。</p>
<p>map数只能根据输入原始文件大小和个数来决定，那么需要在计算之前做数据处理<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">set</span> mapred.reduce.tasks=<span class="number">10</span>;</span>                  </span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> a_1 <span class="keyword">as</span>                   </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a                   </span><br><span class="line"><span class="keyword">distribute</span> <span class="keyword">by</span> <span class="keyword">rand</span>(<span class="number">123</span>);</span></span><br></pre></td></tr></table></figure></p>
<p>变相SQL增加reduce来合并小文件<br>所以根据具体数据情况具体设置，合理利用计算资源。</p>
<p>PS:此处为什么用distribute by，具体可以了解Order by, Sort by ,Dristribute by,Cluster By的差异</p>
<h4 id="1-7__u63A7_u5236hive_u4EFB_u52A1_u7684reduce_u6570"><a href="#1-7__u63A7_u5236hive_u4EFB_u52A1_u7684reduce_u6570" class="headerlink" title="1.7 控制hive任务的reduce数"></a>1.7 控制hive任务的reduce数</h4><p>reduce个数的设定极大影响任务执行效率，不指定reduce个数的情况下，Hive会猜测确定一个reduce个数，基于以下两个设定</p>
<p>hive.exec.reducers.bytes.per.reducer（每个reduce任务处理的数据量，默认为1000^3=1G）<br>hive.exec.reducers.max（每个任务最大的reduce数，默认为999）计算reducer数的公式很简单N=min(参数2，总输入数据量/参数1)即，如果reduce的输入（map的输出）总大小不超过1G,那么只会有一个reduce任务；</p>
<blockquote>
<p>a) 调整reduce个数方法一： 调整hive.exec.reducers.bytes.per.reducer参数的值；set hive.exec.reducers.bytes.per.reducer=500000000; （500M）这次有20个reduce</p>
<p>b) 调整reduce个数方法二； set mapred.reduce.tasks = 15;这次有15个reduce</p>
</blockquote>
<h4 id="1-8__u4EC0_u4E48_u60C5_u51B5_u4E0B_u53EA_u6709_u4E00_u4E2Areduce"><a href="#1-8__u4EC0_u4E48_u60C5_u51B5_u4E0B_u53EA_u6709_u4E00_u4E2Areduce" class="headerlink" title="1.8 什么情况下只有一个reduce"></a>1.8 什么情况下只有一个reduce</h4><p>很多时候你会发现任务中不管数据量多大，不管你有没有设置调整reduce个数的参数，任务中一直都只有一个reduce任务；其实只有一个reduce任务的情况，除了数据量小于hive.exec.reducers.bytes.per.reducer参数值的情况外，还有以下原因：</p>
<blockquote>
<p>（1） 没有group by的汇总，比如把select pt,count(1) from tb group by pt; 写成 select count(1) from tb  这点非常常见，希望大家尽量改写。<br>（2） 用了Order by<br>（3） 有笛卡尔积     通常这些情况下，除了找办法来变通和避免，我暂时没有什么好的办法，因为这些操作都是全局的，所以hadoop不得不用一个reduce去完成；</p>
</blockquote>
<h2 id="2-_Hive_u5C0F_u6587_u4EF6_u5904_u7406_u8F93_u51FA_u63A7_u5236_u7BC7"><a href="#2-_Hive_u5C0F_u6587_u4EF6_u5904_u7406_u8F93_u51FA_u63A7_u5236_u7BC7" class="headerlink" title="2. Hive小文件处理输出控制篇"></a>2. Hive小文件处理输出控制篇</h2><p>Hive输出产生小文件的原主要分两种:</p>
<p><strong>a)  reduce个数过多且每个reduce输出结果较少<br>b)  或者map-only的查询，输入了很多小文件</strong></p>
<h4 id="2-1__u89E3_u51B3_u529E_u6CD5_3A"><a href="#2-1__u89E3_u51B3_u529E_u6CD5_3A" class="headerlink" title="2.1 解决办法:"></a>2.1 解决办法:</h4><p>（1） 减少reduce个数<br>（2） 增加reduce 控制输出文件格式<br>（3） 小文件合并设置[方法比较通用，无需修改业务SQL]</p>
<h4 id="2-2_hive_u5C0F_u6587_u4EF6_u5408_u5E76"><a href="#2-2_hive_u5C0F_u6587_u4EF6_u5408_u5E76" class="headerlink" title="2.2 hive小文件合并"></a>2.2 hive小文件合并</h4><p>控制输出的文件大小和个数除了reduce个数、map个数之外下面几个参数也比较关键。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">set</span> mapred.<span class="keyword">output</span>.compression.<span class="keyword">type</span>=<span class="keyword">BLOCK</span>;</span>默认是RECORD</span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.<span class="keyword">merge</span>.mapredfiles = <span class="literal">true</span>;</span>在Map-Reduce的任务结束时合并小文件默认false</span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.<span class="keyword">merge</span>.mapfiles = <span class="literal">true</span>;</span> 在Map-only的任务结束时合并小文件</span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.<span class="keyword">merge</span>.smallfiles.avgsize=<span class="number">160000000</span>;</span>默认16000000注意少了一个0</span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.exec.<span class="keyword">compress</span>.<span class="keyword">output</span>=<span class="literal">true</span>;</span>默认false输出结果压缩</span><br><span class="line"><span class="operator"><span class="keyword">set</span> mapred.<span class="keyword">output</span>.compression.codec= org.apache.hadoop.io.<span class="keyword">compress</span>.GzipCodec;</span>压缩格式</span><br></pre></td></tr></table></figure></p>
<h4 id="2-3__u9664_u6B64_u4E4B_u5916_u5BF9_u6587_u4EF6_u5B58_u50A8_u683C_u5F0F_u4E5F_u6709_u8981_u6C42"><a href="#2-3__u9664_u6B64_u4E4B_u5916_u5BF9_u6587_u4EF6_u5B58_u50A8_u683C_u5F0F_u4E5F_u6709_u8981_u6C42" class="headerlink" title="2.3 除此之外对文件存储格式也有要求"></a>2.3 除此之外对文件存储格式也有要求</h4><p>这里的文件格式可以设置textfile(默认)、sequencefile、rcfile</p>
<p>下面对这sequencefile和rcfile 文件格式结合GzipCodec、DefaultCodec做了测试对比。</p>
<p><strong>GzipCodec</strong>  </p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:left">CPU Time</th>
<th style="text-align:right">输出文件大小</th>
<th>输出文件数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">textfile</td>
<td style="text-align:left">2 days 4 hours 0 minutes 29 seconds 350 msec</td>
<td style="text-align:right">161G</td>
<td>4586</td>
</tr>
<tr>
<td style="text-align:center">sequencefile</td>
<td style="text-align:left">2 days 1 hours 9 minutes 52 seconds 560 msec</td>
<td style="text-align:right">181G</td>
<td>690</td>
</tr>
<tr>
<td style="text-align:center">rcfile</td>
<td style="text-align:left">2 days 10 hours 26 minutes 55 seconds 780 msec</td>
<td style="text-align:right">121.8G</td>
<td>618</td>
</tr>
</tbody>
</table>
<p><strong>DefaultCodec</strong>   </p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:left">CPU Time</th>
<th style="text-align:right">输出文件大小</th>
<th>输出文件数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">rcfile</td>
<td style="text-align:left">2 days 10 hours 26 minutes 55 seconds 780 msec</td>
<td style="text-align:right">126.8G</td>
<td>611</td>
</tr>
</tbody>
</table>
<p><strong>关闭压缩</strong>   </p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:left">CPU Time</th>
<th style="text-align:right">输出文件大小</th>
<th>输出文件数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">rcfile</td>
<td style="text-align:left"></td>
<td style="text-align:right">850G</td>
<td>2828</td>
</tr>
</tbody>
</table>
<h2 id="3-__u7EFC_u4E0A_u5B9E_u9A8C_u7ED3_u8BBA"><a href="#3-__u7EFC_u4E0A_u5B9E_u9A8C_u7ED3_u8BBA" class="headerlink" title="3. 综上实验结论"></a>3. 综上实验结论</h2><p>设置上述压缩参数hive表文件格式和压缩编码采用Rcfile+Gzip压缩效果最好，比sequencefile节省约33%存储，而且rcfile 在列筛选数据查询效率上比sequencefile高很多（网上同胞测试过）</p>
<p>综上建议hive默认参数调整如下:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">set</span> mapred.<span class="keyword">output</span>.compression.<span class="keyword">type</span>=<span class="keyword">BLOCK</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.<span class="keyword">merge</span>.mapredfiles = <span class="literal">true</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.<span class="keyword">merge</span>.mapfiles = <span class="literal">true</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.<span class="keyword">merge</span>.smallfiles.avgsize=<span class="number">160000000</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">set</span> hive.exec.<span class="keyword">compress</span>.<span class="keyword">output</span>=<span class="literal">true</span>;</span></span><br></pre></td></tr></table></figure>
<p>hive表文件格式选择：</p>
<p>除了etl表其余表建表默认格式为RCFile</p>
<p>对于已经创建的表用<code>ALTER TABLE table_name SET RCFile;</code>修改后续数据的存储格式，这个设置不影响该表之前存储的数据，因为hive在数据读取的时候预判的文件格式。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hive/">Hive</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/优化/">优化</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/小文件/">小文件</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/大数据/">大数据</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Tom-Khabaza挖掘9律" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/28/Tom-Khabaza挖掘9律/" class="article-date">
  	<time datetime="2016-03-28T15:01:00.000Z" itemprop="datePublished">2016-03-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/28/Tom-Khabaza挖掘9律/">Tom Khabaza挖掘9律</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-__u6316_u63989_u5F8B_u4E4B1_u5F8B_2C_u53C8_u79F0_u4E1A_u52A1_u76EE_u6807_u5F8B"><a href="#1-__u6316_u63989_u5F8B_u4E4B1_u5F8B_2C_u53C8_u79F0_u4E1A_u52A1_u76EE_u6807_u5F8B" class="headerlink" title="1. 挖掘9律之1律,又称业务目标律"></a>1. 挖掘9律之1律,又称业务目标律</h3><p>业务目标是所有数据挖掘解决方案的本源。数据挖掘不是为了数据挖掘而挖掘，所有的数据挖掘都必须而且应该服务于特定的商业（业务）目的，离开了业务目的和业务应用，就没有数据挖掘的价值。正如Tom Khabaza所说的数据挖掘，首先它不是技术，而是流程，其中存在着一个或多个业务目标，没有业务目标，就没有数据挖掘。</p>
<h3 id="2-__u6316_u63989_u5F8B_u4E4B2_u5F8B_2C_u53C8_u79F0_u4E1A_u52A1_u77E5_u8BC6_u5F8B"><a href="#2-__u6316_u63989_u5F8B_u4E4B2_u5F8B_2C_u53C8_u79F0_u4E1A_u52A1_u77E5_u8BC6_u5F8B" class="headerlink" title="2. 挖掘9律之2律,又称业务知识律"></a>2. 挖掘9律之2律,又称业务知识律</h3><p>业务知识是数据挖掘每一步的核心。数据挖掘的本质就是将业务知识、经验和洞察力与数据挖掘方法相结合，从数据中发现有价值的东西。</p>
<h3 id="3-__u6316_u63989_u5F8B_u4E4B3_u5F8B_2C_u53C8_u79F0_u6570_u636E_u51C6_u5907_u5F8B"><a href="#3-__u6316_u63989_u5F8B_u4E4B3_u5F8B_2C_u53C8_u79F0_u6570_u636E_u51C6_u5907_u5F8B" class="headerlink" title="3. 挖掘9律之3律,又称数据准备律"></a>3. 挖掘9律之3律,又称数据准备律</h3><p>数据准备能让数据挖掘流程事半功倍。数据准备在整个挖掘过程中所占用的时间常会超过一半，它包括对数据的熟悉、清理、重组、转换等一系列过程，其目的主要是让数据变动更干净，更能真实体现业务背景，更加容易被模型发现其隐含的有价值的商业信息和商业规律。</p>
<h3 id="4-__u6316_u63989_u5F8B_u4E4B4_u5F8B_2C_u53C8_u79F0_u5929_u4E0B_u6CA1_u6709_u68C9_u670D_u7684_u5348_u9910"><a href="#4-__u6316_u63989_u5F8B_u4E4B4_u5F8B_2C_u53C8_u79F0_u5929_u4E0B_u6CA1_u6709_u68C9_u670D_u7684_u5348_u9910" class="headerlink" title="4. 挖掘9律之4律,又称天下没有棉服的午餐"></a>4. 挖掘9律之4律,又称天下没有棉服的午餐</h3><p>只有通过实际验证才能发现给定应用的正确模型。一个模型无论搭建过程如何完美，如果没有在实际数据中经过验证，就没有任何价值和意义。</p>
<h3 id="5-__u6316_u63989_u5F8B_u4E4B5_u5F8B_2C_u53C8_u79F0_u6C83_u7279_u91D1_u65AF_u5B9A_u5F8B"><a href="#5-__u6316_u63989_u5F8B_u4E4B5_u5F8B_2C_u53C8_u79F0_u6C83_u7279_u91D1_u65AF_u5B9A_u5F8B" class="headerlink" title="5. 挖掘9律之5律,又称沃特金斯定律"></a>5. 挖掘9律之5律,又称沃特金斯定律</h3><p>总会有模式存在。只要有数据，一定可以从中发现有价值的信息的。</p>
<h3 id="6-__u6316_u63989_u5F8B_u4E4B6_u5F8B"><a href="#6-__u6316_u63989_u5F8B_u4E4B6_u5F8B" class="headerlink" title="6. 挖掘9律之6律"></a>6. 挖掘9律之6律</h3><p>数据挖掘将业务领域的感知放大。得益于数据挖掘的技术和流程，使得数据中隐藏的知识和有价值的信息能被发现。</p>
<h3 id="7-__u6316_u63989_u5F8B_u4E4B7_u5F8B_2C_u53C8_u79F0_u9884_u6D4B_u5B9A_u5F8B"><a href="#7-__u6316_u63989_u5F8B_u4E4B7_u5F8B_2C_u53C8_u79F0_u9884_u6D4B_u5B9A_u5F8B" class="headerlink" title="7. 挖掘9律之7律,又称预测定律"></a>7. 挖掘9律之7律,又称预测定律</h3><p>预测将信息从局部扩展到整体。数据挖掘使得我们可以透过已知的去发现（某些）未知的。这里提到的就是数据挖掘中常见的预测（响应、分类）模型的业务应用场景了。</p>
<h3 id="8-__u6316_u63989_u5F8B_u4E4B8_u5F8B_2C_u53C8_u79F0_u4EF7_u503C_u5B9A_u5F8B"><a href="#8-__u6316_u63989_u5F8B_u4E4B8_u5F8B_2C_u53C8_u79F0_u4EF7_u503C_u5B9A_u5F8B" class="headerlink" title="8. 挖掘9律之8律,又称价值定律"></a>8. 挖掘9律之8律,又称价值定律</h3><p>数据挖掘的结果的价值并不取决于模型的精度和稳定性。还是那句话，模型的价值只能由其所满足的业务需求和商业应用价值来决定，而不是由模型本身的精度和稳定性决定；再精确的模型，再稳定的模型，如果不能解决业务问题，如果不能带来业务的商业应用价值，就是没有价值的。</p>
<h3 id="9-__u6316_u63989_u5F8B_u4E4B9_u5F8B_2C_u53C8_u79F0_u53D8_u5316_u5B9A_u5F8B"><a href="#9-__u6316_u63989_u5F8B_u4E4B9_u5F8B_2C_u53C8_u79F0_u53D8_u5316_u5B9A_u5F8B" class="headerlink" title="9. 挖掘9律之9律,又称变化定律"></a>9. 挖掘9律之9律,又称变化定律</h3><p>所有的模式都会受到变化。任何模型或者分析结论都有时间限制的，今天还是非常有价值的模型，或许明天就过时了，所有模型的维护和优化都非常重要。</p>
<hr>
<p>摘自《数据挖掘与数据化运营实战:思路、方法、技巧与应用》</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据挖掘/">数据挖掘</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/理论/">理论</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/数据挖掘/">数据挖掘</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-zeppelin" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/19/zeppelin/" class="article-date">
  	<time datetime="2016-03-19T13:45:00.000Z" itemprop="datePublished">2016-03-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/19/zeppelin/">zeppelin</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>很久没更新博客了，今天给大家分享一个spark生态系统的成员——zeppelin，一个可以简单数据可视化，类似ipython notebook的工具。</p>
<h2 id="1-_u4E0B_u8F7D"><a href="#1-_u4E0B_u8F7D" class="headerlink" title="1.下载"></a>1.下载</h2><p>官网：<a href="https://zeppelin.incubator.apache.org/">https://zeppelin.incubator.apache.org/</a><br><img src="http://7xp4nl.com1.z0.glb.clouddn.com/zeppelin1.png?imageView2/2/w/500/h/400/q/100" alt="zeppelin"><br>zeppelin源码托管于github,首先我们获取它的最新源码<br><a href="https://github.com/apache/incubator-zeppelin">https://github.com/apache/incubator-zeppelin</a><br>博主下载的版本是0.6.0-incubating-SNAPSHOT</p>
<h2 id="2-__u7F16_u8BD1"><a href="#2-__u7F16_u8BD1" class="headerlink" title="2. 编译"></a>2. 编译</h2><p>环境准备：  </p>
<ul>
<li>maven </li>
<li>node   </li>
<li>npm<br>在zeppelin源码home目录下执行如下命令开始编译  </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -Pbuild-distr  -Phadoop-<span class="number">2.6</span> -Pyarn -Pspark-<span class="number">1.5</span> -Dspark.version=<span class="number">1.5</span><span class="number">.1</span> -Ppyspark -DskipTests</span><br></pre></td></tr></table></figure>
<p>编译注意事项：</p>
<p>  以上是摘要<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spark/">spark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zeppelin/">zeppelin</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/数据可视化/">数据可视化</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2016/03/19/zeppelin/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-如何快速适应职场环境" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/28/如何快速适应职场环境/" class="article-date">
  	<time datetime="2016-01-28T11:32:00.000Z" itemprop="datePublished">2016-01-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/28/如何快速适应职场环境/">如何快速适应职场环境</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>换位思考了自己如果是新人，该如何快速融入环境，感触颇多。总结了一些自己的感悟，分享给大家！</p>
<h2 id="u5DE5_u4F5C_u4E60_u60EF"><a href="#u5DE5_u4F5C_u4E60_u60EF" class="headerlink" title="工作习惯"></a>工作习惯</h2><h4 id="1-__u65E5_u62A5"><a href="#1-__u65E5_u62A5" class="headerlink" title="1. 日报"></a>1. 日报</h4><p> 几乎所有新人都会经历一段写日报的日子。刚工作的时候自己也是很排斥这个事情，感觉天天写日报是一件很烦躁的事情。但是，现在想起来，日报确实很有必要。日报的目的是向导师或者领导反馈自己的成长，进步情况。最重要的是养成经常总结的习惯！IT行业不像其他行业，工作环境都是各自面对着自己的电脑。人和人之间的交流机会相对来说少了很多，经常会遇到的情况是，两个面对面坐着的人，都是用QQ或者RTX沟通O(∩_∩)O~。那么新人如何能够让自己目前的学习进度，和能力情况反馈给导师呢？那就是写日报了。日报一般分三个内容：1. 今天做了什么,进度如何？  2. 有哪些心得体会？  3. 后期计划？自己做新人的时候，最困惑的是第一点，日报就是每天发一次。其实每天做的事情不会太多，感觉没什么可写。现在站在导师的角度来看，其实最想看到的是，今天做了哪些事情，遇到什么困难，怎么解决的，结果怎么样？相信作为新人，困难一定不少吧。 接下来最重要的就是心得体会了。既然遇到了问题，一个解决方案，遇到一个坑，后期如何避免都是心得体会。再谈后期计划，所谓计划就是对未来工作的安排，这样讲起来有点虚。计划的重点在于。1. 大的问题，细化分解。  2. 时间预算（需要花费多长时间能够完成？，计划截止日期是什么时候，因为如果时间足够充裕，就没必要做计划），有了计划列表，每天日报滚动起来，回顾自己要做哪些事情，哪些事情优先级高。完成的百分比进度如何自然就很清晰！</p>
<h4 id="2-__u65F6_u95F4_u7BA1_u7406"><a href="#2-__u65F6_u95F4_u7BA1_u7406" class="headerlink" title="2. 时间管理"></a>2. 时间管理</h4><p> 学生的时候，学校有课程表，一切跟着老师节奏走。时间也充裕，每天的事情不多。但是到了工作环境，每天的事情，其实会安排的满满当当。每个人每天都有24小时。时间是一样多的。但是能做的事情，并不一样多。这中间的差距，就是时间管理能力。1. 时间概念，日报里有很重要的一项是后期计划。计划的一个重要因素就是时间管理问题。最重要的问题就是，当日事当日毕！拿日报来说，我非常不建议日报放在第二天发。写日报需要先回顾昨天做了什么事情。隔一晚后可能有些事情就会忘掉，其实早上时间本来就很短。写个日报，完事后差不多半天就过去了。每天有效时间几乎缩短了一半。想下如果把日报放在下班前些呢？1. 当天遇到的问题，和做的事情，记忆还深刻。总结日报的时候思路比较清晰。2. 晚上也相对安静一些，适合静下心思考并规划后续排期。关于排期的另一个比较重要的理论就是，四象限法则，从时间维度，分为紧急，不紧急。从重要性来讲，分为重要，不重要。这样事情的优先级就比较好确定了。然后，一件事一事的去处理就好。</p>
<h4 id="3-__u6C9F_u901A_u65B9_u5F0F"><a href="#3-__u6C9F_u901A_u65B9_u5F0F" class="headerlink" title="3. 沟通方式"></a>3. 沟通方式</h4><p> 前面提到的日报，其实也是沟通方式的一种，属于比较正式的一种。刚参加工作，可能会发现：RTX可以沟通，QQ也可以沟通，Email也可以沟通，电话也可以沟通。这么多沟通工具的选择和沟通技巧有哪些呢？前面提到的四象限法则原理一样，沟通除了分紧急不紧急外，还分正式，非正式。一般非正式问题，不紧急的RTX直接沟通，作为新人，需要和第三方沟通的时间建议带上导师RTX拉讨论组跟进，另外，RTX消息也是非常多的，不一定每个人都会回复，如果出现很久都没回复的，很有可能RTX消息被埋没了，那么问题沟通方式升级，可以打电话去确认。电话打过去没人接，可以看看是否在开会 或者去找人当面沟通。很多新人，经常会说”xxx没回复，xxx没接电话……”。这些理由都是无效的。1. 不是每个人都有精力看完所有RTX消息 2. 不要怕麻烦，怕打扰别人，因为这种情况，别人不处理完问题，自己的工作没法进展！另外，还需要注意的是，沟通效率，无论RTX沟通或者电话沟通，首先要让对方清楚的了解自己描述的问题。问题描述，多想想言简意赅，清楚的表达问题。禁忌“那段代码..”，之类的问题，让别人还要反问“到底是哪段?”的问题。学会换位思考，站在别人角度，看看自己的表达是否容易理解。遇到问题，千万不要自己一个人在死磕、耗时间！发现没有思路的，就赶快请教身边同事，向别人请教不可耻，这一点非常重要。另外正式的事情，RTX沟通好之后，邮件同步结果。正式的事情，格式也应该正式。文字字体，颜色都要有规范，不应该选一些很花哨的字体，最终可能导致自己敲错字母，也难以发现。比如h和b的问题。邮件发出之前，记得检查错别字，有附件的是否带上附件？等细节问题。了解这些潜规则的途径之一，通过搜索引擎搜索” 办公礼仪”，了解这些小细节之后，在自己的习惯中落实下来！</p>
<h2 id="u4E13_u4E1A_u6280_u80FD_u63D0_u5347"><a href="#u4E13_u4E1A_u6280_u80FD_u63D0_u5347" class="headerlink" title="专业技能提升"></a>专业技能提升</h2><h4 id="1-__u64CD_u4F5C_u6280_u80FD"><a href="#1-__u64CD_u4F5C_u6280_u80FD" class="headerlink" title="1. 操作技能"></a>1. 操作技能</h4><p> 在IT行业，是一个对动手操作能力要求比较高的行业。我们的生产工具是电脑。电脑是提升人类生产水平的工具。那么该如何用好这个工具呢？1. 操作系统熟练程度，对于大部分新人来说，操作电脑的能力还是比较差的，无论是数量程度还是对计算机的了解程度，关于这个方面能力的提升，自己可以在网上搜集一些电脑办公操作技巧之类的文章多看，多练习。2. 软件操作，一如IT深似海，软件堆积如山高。是的，看别的同事操作的时候，动作那么流畅，效率那么高，其实离不开自己喜欢的一套辅助工具。这些辅助工具各司其职，最终组合成自己的开发办公环境。比如文本编辑sublime text、notepad++ 文档总结工具excel，word，ppt。快速了解各个工具使用情况的技巧就是，和前辈们去请教，看看那些工具比较好用，然后自己体验后选择合适自己的，去把它用熟练！另外，新人和新人多相互交流，相互的学习经验可以相互学习，成长更快！闭门造车，很难取得进步。</p>
<h4 id="2-__u7406_u8BBA_u77E5_u8BC6"><a href="#2-__u7406_u8BBA_u77E5_u8BC6" class="headerlink" title="2. 理论知识"></a>2. 理论知识</h4><p> 这块主要的问题在于，认识清楚自己缺哪些知识，哪些知识是最迫切需要掌握的。然后去找学习资料，安排自己的知识补齐计划。和在学校不同的是，工作后学习完全靠自己，资料查找能力，和理解能力是非常重要的。学会应用搜索引擎，和一些论坛博客。想信会有很多教程视频、书籍、博客帮助自己成长。善于发现学习资料的同事，要真正理解其中的内容。比如对比学习。方案A好 好在哪里，方案B不好，不好在哪里。什么场景选择A 什么场景选择B。类似的思路，多一些总结和思考。技术类书，能找到电子版的建议下载电子版的看。新人要学的知识太多，电子版的书可以节省很多费用，放在网盘里，便于查阅!另外，一些笔记软件，例如印象笔记、有道笔记、为知笔记，可以用来收集知识。这些工具可以全平台同步，便于随时查阅，回顾。</p>
<h4 id="3-__u4E1A_u52A1_u7406_u89E3"><a href="#3-__u4E1A_u52A1_u7406_u89E3" class="headerlink" title="3. 业务理解"></a>3. 业务理解</h4><p> 除了编程，或者计算机能力外。工作更多的是理解业务，这样可以搞清楚需求发起的原因。这块主要是知识梳理，结合自己的工作任务，多考虑这个需求的目的是什么？作为开发同学，一定要考虑的比提需求的同学考虑的多。因为在这个领域，自己才是最专业的。千万避免需求说是什么，自己只做什么。挤牙膏的态度，很容易导致简单的需求，重复返工。工作效率比较低！知识梳理的方法，1. 分层 2. 分类 3. 梳理逻辑关系。这个思路有助于了解清楚业务知识体系！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/新人培养/">新人培养</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-数学公式符号扫盲" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/24/数学公式符号扫盲/" class="article-date">
  	<time datetime="2016-01-24T12:09:00.000Z" itemprop="datePublished">2016-01-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/24/数学公式符号扫盲/">数学公式符号扫盲</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-__u51E0_u4F55_u7B26_u53F7"><a href="#1-__u51E0_u4F55_u7B26_u53F7" class="headerlink" title="1. 几何符号"></a>1. 几何符号</h3><pre><code>⊥   ∥   ∠   ⌒   ⊙   ≡   ≌    △
</code></pre><h3 id="2-__u4EE3_u6570_u7B26_u53F7"><a href="#2-__u4EE3_u6570_u7B26_u53F7" class="headerlink" title="2. 代数符号"></a>2. 代数符号</h3><pre><code>∝   ∧   ∨   ～   ∫   ≠    ≤   ≥   ≈   ∞   ∶
</code></pre><h3 id="3-__u8FD0_u7B97_u7B26_u53F7"><a href="#3-__u8FD0_u7B97_u7B26_u53F7" class="headerlink" title="3. 运算符号"></a>3. 运算符号</h3><pre><code>如加号（＋），减号（－），乘号（×或·），除号（÷或／）
两个集合的并集（∪），交集（∩），根号（√）
对数（log，lg，ln），比（：）
微分（dx），积分（∫），曲线积分（∮）等。
</code></pre><h3 id="4-__u96C6_u5408_u7B26_u53F7"><a href="#4-__u96C6_u5408_u7B26_u53F7" class="headerlink" title="4. 集合符号"></a>4. 集合符号</h3><pre><code>∪   ∩   ∈
</code></pre><p>  以上是摘要<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/公式/">公式</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/公式/">公式</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2016/01/24/数学公式符号扫盲/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-R数据挖掘常用包汇总" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/22/R数据挖掘常用包汇总/" class="article-date">
  	<time datetime="2015-12-22T15:42:00.000Z" itemprop="datePublished">2015-12-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/22/R数据挖掘常用包汇总/">R数据挖掘常用包汇总</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下面列出了可用于数据挖掘的R包和函数的集合。其中一些不是专门为了数据挖掘而开发，但数据挖掘过程中这些包能帮我们不少忙，所以也包含进来。</p>
<ol>
<li><p>聚类<br>常用的包： fpc，cluster，pvclust，mclust<br>基于划分的方法: kmeans, pam, pamk, clara<br>基于层次的方法: hclust, pvclust, agnes, diana<br>基于模型的方法: mclust<br>基于密度的方法: dbscan<br>基于画图的方法: plotcluster, plot.hclust<br>基于验证的方法: cluster.stats</p>
</li>
<li><p>分类<br>常用的包：<br>rpart，party，randomForest，rpartOrdinal，tree，marginTree，<br>maptree，survival<br>决策树: rpart, ctree<br>随机森林: cforest, randomForest<br>回归, Logistic回归, Poisson回归: glm, predict, residuals<br>生存分析: survfit, survdiff, coxph</p>
<p>以上是摘要</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法包/">算法包</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/数据挖掘/">数据挖掘</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2015/12/22/R数据挖掘常用包汇总/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="false-python-pandas" class="article article-type-false" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/14/python-pandas/" class="article-date">
  	<time datetime="2015-12-14T15:24:00.000Z" itemprop="datePublished">2015-12-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/14/python-pandas/">python pandas</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <html><br><body style="margin:0"><br><iframe src="http://nbviewer.ipython.org/github/pengyq/pandas_share/blob/master/pandas_demo.ipynb" style="width:100%;height:700px;border:0px" target="_parent"></iframe><br></body><br></html>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pandas/">pandas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/科学计算/">科学计算</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-python爬虫框架Scrapy入门demo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/13/python爬虫框架Scrapy入门demo/" class="article-date">
  	<time datetime="2015-12-13T06:13:12.000Z" itemprop="datePublished">2015-12-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/13/python爬虫框架Scrapy入门demo/">python爬虫框架Scrapy</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>安装Scrapy</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo pip install Scrapy</span><br></pre></td></tr></table></figure>
<p> 在安装过程中出现如下错误:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Installing collected packages: six, w3lib, lxml, Twisted, characteristic, pyasn1, pyasn1-modules, service-identity, scrapy</span><br><span class="line">  Found existing installation: six <span class="number">1.4</span>.<span class="number">1</span></span><br><span class="line">    DEPRECATION: Uninstalling <span class="tag">a</span> distutils installed project (six) has been deprecated and will be removed <span class="keyword">in</span> <span class="tag">a</span> future version. This is due to the fact that uninstalling <span class="tag">a</span> distutils project will only partially uninstall the project.</span><br><span class="line">    Uninstalling six-<span class="number">1.4</span>.<span class="number">1</span>:</span><br><span class="line">Exception:</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Library/Python/2.7/site-packages/pip/basecommand.py"</span>, line <span class="number">211</span>, <span class="keyword">in</span> main</span><br><span class="line">    status = self.<span class="function"><span class="title">run</span><span class="params">(options, args)</span></span></span><br><span class="line">  File <span class="string">"/Library/Python/2.7/site-packages/pip/commands/install.py"</span>, line <span class="number">311</span>, <span class="keyword">in</span> run</span><br><span class="line">    root=options<span class="class">.root_path</span>,</span><br><span class="line">  File <span class="string">"/Library/Python/2.7/site-packages/pip/req/req_set.py"</span>, line <span class="number">640</span>, <span class="keyword">in</span> install</span><br><span class="line">    requirement.<span class="function"><span class="title">uninstall</span><span class="params">(auto_confirm=True)</span></span></span><br><span class="line">  File <span class="string">"/Library/Python/2.7/site-packages/pip/req/req_install.py"</span>, line <span class="number">716</span>, <span class="keyword">in</span> uninstall</span><br><span class="line">    paths_to_remove.<span class="function"><span class="title">remove</span><span class="params">(auto_confirm)</span></span></span><br><span class="line">  File <span class="string">"/Library/Python/2.7/site-packages/pip/req/req_uninstall.py"</span>, line <span class="number">125</span>, <span class="keyword">in</span> remove</span><br><span class="line">    <span class="function"><span class="title">renames</span><span class="params">(path, new_path)</span></span></span><br><span class="line">  File <span class="string">"/Library/Python/2.7/site-packages/pip/utils/__init__.py"</span>, line <span class="number">315</span>, <span class="keyword">in</span> renames</span><br><span class="line">    shutil.<span class="function"><span class="title">move</span><span class="params">(old, new)</span></span></span><br><span class="line">  File <span class="string">"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py"</span>, line <span class="number">302</span>, <span class="keyword">in</span> move</span><br><span class="line">    <span class="function"><span class="title">copy2</span><span class="params">(src, real_dst)</span></span></span><br><span class="line">  File <span class="string">"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py"</span>, line <span class="number">131</span>, <span class="keyword">in</span> copy2</span><br><span class="line">    <span class="function"><span class="title">copystat</span><span class="params">(src, dst)</span></span></span><br><span class="line">  File <span class="string">"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py"</span>, line <span class="number">103</span>, <span class="keyword">in</span> copystat</span><br><span class="line">    os.<span class="function"><span class="title">chflags</span><span class="params">(dst, st.st_flags)</span></span></span><br><span class="line">OSError: [Errno <span class="number">1</span>] Operation not permitted: <span class="string">'/tmp/pip-4OOWnv-uninstall/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/six-1.4.1-py2.7.egg-info'</span></span><br></pre></td></tr></table></figure>
<p> 可以看到Scrapy安装想要卸载掉six包，而产生的错误，所以应该让pip安装的时候忽略six包，该用下面的命令:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install scrapy --ingnore-installed six</span><br></pre></td></tr></table></figure>
<p>以上是摘要</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a  href="/2015/12/13/python爬虫框架Scrapy入门demo/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		 Box
    	</div>
      	<div class="footer-right">
          Copyright &copy; 2016 [<a href="http://pengyq.org/" target="_blank">pengyq.org</a>]  Powered By pengyq
        <!--
        	<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	-->
        </div>
        
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>